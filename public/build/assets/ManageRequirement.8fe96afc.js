import{_ as M,x as q,g as _,w as i,r as l,o as n,d as a,e as f,t as u,k as y,c,i as v,b as t,h as x,z as F,F as R,T as b}from"./app.0b9d15e2.js";const A={data(){return{search:"",isFetching:!1,showForm:!1,isSaving:!1,requestError:null,requirements:[],selectedRequirement:null,selectedRequirements:[],validationError:{},isUpdateMode:!1,isDeleting:!1,requirementForm:{title:"",selectedType:"",selectedUploadType:"",attachmentsData:[{id:0,name:"Image",value:"image",selected:!1},{id:1,name:"Documents",value:"documents",selected:!1}],uploadData:[{id:0,name:"Single Upload",value:"single-upload",selected:!1},{id:1,name:"Multiple Upload",value:"multiple-upload",selected:!1}]}}},created(){this.loadRequirements()},watch:{search(e,s){this.searchRequirement()}},methods:{async searchRequirement(){await q.post("api/manage-requirement/search",{search:this.search}).then(e=>{this.requirements=e.data.data})},selectRequirement(e){this.isUpdateMode=!0;const s={id:e.id,name:e.name,file_type:e.file_type,upload_type:e.upload_type};this.requirementForm.title=s.name,this.requirementForm.selectedType=s.file_type,this.requirementForm.selectedUploadType=s.upload_type,this.requirementForm.attachmentsData.forEach(m=>{m.value==e.file_type&&(m.selected=!0)}),this.requirementForm.uploadData.forEach(m=>{m.value==e.upload_type&&(m.selected=!0)}),this.selectedRequirement=s,this.showForm=!0},async updateRequirement(){this.selectedRequirement.name=this.requirementForm.title,this.selectedRequirement.file_type=this.requirementForm.selectedType,this.selectedRequirement.upload_type=this.requirementForm.selectedUploadType,await q.post("api/manage-requirement/update",this.selectedRequirement).then(e=>{this.clearRequirementForm(),this.loadRequirements(),this.selectedRequirement=null,this.showForm=!1}).catch(e=>{e.response.status===422?this.validationError=e.response.data.errors:this.requestError=e}).finally(()=>{this.isSaving=!1})},clearRequirementForm(){this.validationError={},this.requirementForm.title="",this.requirementForm.selectedType="",this.requirementForm.selectedUploadType="",this.requirementForm.attachmentsData.forEach(e=>{e.selected=!1}),this.requirementForm.uploadData.forEach(e=>{e.selected=!1}),this.selectedRequirements=[]},customConfirmationDialog({title:e="Are you sure?",text:s="You won't be able to revert this!",icon:m="warning",confirmButtonText:w="Yes, delete it!",passFunction:r,passCancelFunction:d}){this.$swal({title:e,text:s,icon:m,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:w}).then(async p=>{p.isConfirmed&&r()})},async deleteSelectedRequirement(){this.customConfirmationDialog({title:"Are you sure do you want to delete selecred requiremens?",passFunction:async()=>{const e=[];this.selectedRequirements.forEach(s=>{e.push(s.id)}),this.isDeleting=!0,await q.post("api/manage-requirement/delete-selected",{requirements_id:e}).then(s=>{this.clearRequirementForm(),this.loadRequirements()}).catch(s=>{this.requestError=s}).finally(()=>{this.isDeleting=!1})}})},async loadRequirements(){this.isFetching=!0,await q.get("api/manage-requirement").then(e=>{this.requirements=e.data.data}).catch(e=>{this.requestError=e}).finally(()=>{this.isFetching=!1})},async createRequirement(){this.isSaving=!0;const e={name:this.requirementForm.title,file_type:this.requirementForm.selectedType,upload_type:this.requirementForm.selectedUploadType};await q.post("api/manage-requirement/create",e).then(s=>{this.clearRequirementForm(),this.loadRequirements(),this.selectedRequirement=null,this.showForm=!1}).catch(s=>{s.response.status===422?this.validationError=s.response.data.errors:this.requestError=s}).finally(()=>{this.isSaving=!1})},showTheForm(){this.isUpdateMode=!1,this.validationError={},this.clearRequirementForm(),this.showForm=!0},closeTheForm(){this.clearRequirementForm(),this.showForm=!1},handleSelecteAttachmentType(e){this.requirementForm.attachmentsData.forEach(s=>{s.selected=!1}),e.selected=!0,this.requirementForm.selectedType=e.value},handleUploadType(e){this.requirementForm.uploadData.forEach(s=>{s.selected=!1}),e.selected=!0,this.requirementForm.selectedUploadType=e.value}}},N=t("i",{class:"fa-solid fa-plus mr-1"},null,-1),z=f(" ADD REQUIREMENTS "),I=t("i",{class:"fa-regular fa-trash-can mr-2"},null,-1),Y={class:"relative w-12 px-6 sm:w-16 sm:px-8"},j=["value"],L={class:"text-sm"},Q={class:"flex items-center"},G={class:"capitalize"},H={class:"text-sm"},J={class:"flex items-center"},K={class:"capitalize"},O={class:"inline-flex rounded bg-green-100 px-2 text-xs font-semibold leading-5 text-green-800 m-0.5"},P={class:"text-sm"},W={class:"flex items-center"},X={class:"capitalize"},Z={class:"inline-flex rounded bg-green-100 px-2 text-xs font-semibold leading-5 text-green-800 m-0.5"},$={class:"py-2 text-sm text-gray-500"},ee=["disabled","onClick"],te=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),se=[te],re=t("p",{class:"text-base font-bold"},"Requirement Name",-1),oe={class:"py-2"},ne={key:0,class:"text-xs text-red-500 mt-1"},ie=t("div",{class:"mt-1"},[t("p",{class:"text-base font-bold"},"Attachment Type")],-1),ae={class:""},le={class:"flex items-center p-1 rounded-sm"},ce=["onUpdate:modelValue","onChange"],de={class:"mr-1 capitalize text-xs"},ue={key:0,class:"text-xs text-red-500 mt-1"},me=t("div",{class:"mt-1"},[t("p",{class:"text-base font-bold"},"Uploads")],-1),he={class:""},pe={class:"flex items-center p-1 rounded-sm"},_e=["onUpdate:modelValue","onChange"],qe={class:"mr-1 capitalize text-xs"},fe={key:0,class:"text-xs text-red-500 mt-1"},ye={class:"my-2 flex justify-end"},ge=f(" Close "),ve={key:0,class:"my-1 mx-2"},xe={key:1},Fe=f(" Update "),Re=f(" Save ");function we(e,s,m,w,r,d){const p=l("TableButton"),C=l("BaseSearchInput"),E=l("BaseTableSetup"),T=l("BaseTable"),k=l("BaseInput"),g=l("w-divider"),B=l("BaseSpinner"),D=l("BaseDialog"),U=l("RequestError"),S=l("BaseErrorDialog"),V=l("BaseCard");return n(),_(V,{subtitle:"Manage Requirements"},{header:i(()=>[a(E,null,{"searchs-area":i(()=>[a(p,{class:"mr-2",onClick:d.showTheForm},{default:i(()=>[N,z]),_:1},8,["onClick"]),a(C,{placeholder:"Search Requirements ...",modelValue:r.search,"onUpdate:modelValue":s[0]||(s[0]=o=>r.search=o)},null,8,["placeholder","modelValue"])]),"filters-area":i(()=>[]),"actions-area":i(()=>[r.selectedRequirements.length>0?(n(),_(p,{key:0,onClick:d.deleteSelectedRequirement,mode:!0,class:"mr-2"},{default:i(()=>[I,f(" Delete Selected "+u(r.selectedRequirements.length)+") ",1)]),_:1},8,["onClick"])):y("",!0)]),_:1}),a(T,{thdata:["","Name","File Type","Upload Type",""],isFetching:r.isFetching},{data:i(()=>[(n(!0),c(R,null,v(r.requirements,o=>(n(),c("tr",{key:o.id},[t("td",Y,[x(t("input",{"onUpdate:modelValue":s[1]||(s[1]=h=>r.selectedRequirements=h),value:o,type:"checkbox",class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 accent-green-600 text-white rounded border-gray-200 sm:left-6"},null,8,j),[[F,r.selectedRequirements]])]),t("td",L,[t("div",Q,[t("div",G,u(o.name),1)])]),t("td",H,[t("div",J,[t("div",K,[t("span",O,u(o.file_type),1)])])]),t("td",P,[t("div",W,[t("div",X,[t("span",Z,u(o.upload_type),1)])])]),t("td",$,[t("button",{disabled:r.selectedRequirements.length>0,onClick:h=>d.selectRequirement(o),type:"button",class:"inline-flex items-center rounded-md border outline:none border-gray-300 bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-30 mr-1"},se,8,ee)])]))),128))]),_:1},8,["isFetching"])]),default:i(()=>[(n(),_(b,{to:"#app"},[a(D,{show:r.showForm,width:"500",preventClose:!0},{"c-content":i(()=>[re,t("div",oe,[t("div",null,[a(k,{modelValue:r.requirementForm.title,"onUpdate:modelValue":s[2]||(s[2]=o=>r.requirementForm.title=o)},null,8,["modelValue"]),r.validationError.name?(n(),c("p",ne,u(r.validationError.name[0]),1)):y("",!0)])]),a(g,{class:"my6"}),t("div",null,[ie,t("div",ae,[(n(!0),c(R,null,v(r.requirementForm.attachmentsData,o=>(n(),c("div",{key:o.id},[t("div",le,[x(t("input",{"onUpdate:modelValue":h=>o.selected=h,onChange:h=>d.handleSelecteAttachmentType(o),type:"checkbox",class:"w-4 h-4 accent-green-600 text-white mr-1 border-blue-700 border-2 cursor-pointer"},null,40,ce),[[F,o.selected]]),t("label",de,u(o.name),1)])]))),128)),r.validationError.file_type?(n(),c("p",ue,u(r.validationError.file_type[0]),1)):y("",!0)]),a(g,{class:"my6 my-2"})]),t("div",null,[me,t("div",he,[(n(!0),c(R,null,v(r.requirementForm.uploadData,o=>(n(),c("div",{key:o.id},[t("div",pe,[x(t("input",{"onUpdate:modelValue":h=>o.selected=h,onChange:h=>d.handleUploadType(o),type:"checkbox",class:"w-4 h-4 accent-green-600 text-white mr-1 border-blue-700 border-2 cursor-pointer"},null,40,_e),[[F,o.selected]]),t("label",qe,u(o.name),1)])]))),128))]),r.validationError.upload_type?(n(),c("p",fe,u(r.validationError.upload_type[0]),1)):y("",!0),a(g,{class:"my6 my-2"})]),t("div",ye,[a(p,{mode:"",class:"mr-2",onClick:d.closeTheForm},{default:i(()=>[ge]),_:1},8,["onClick"]),r.isSaving?(n(),c("div",ve,[a(B)])):(n(),c("div",xe,[r.isUpdateMode?(n(),_(p,{key:0,class:"",onClick:d.updateRequirement},{default:i(()=>[Fe]),_:1},8,["onClick"])):(n(),_(p,{key:1,class:"",onClick:d.createRequirement},{default:i(()=>[Re]),_:1},8,["onClick"]))]))])]),_:1},8,["show"])])),(n(),_(b,{to:"#app"},[a(S,{show:r.requestError!=null,width:"400",transition:"slide-fade-down"},{"c-content":i(()=>[a(U,{statusCode:r.requestError.statusCode,onClose:s[3]||(s[3]=o=>r.requestError=null),message:r.requestError.message},null,8,["statusCode","message"])]),"c-actions":i(()=>[]),_:1},8,["show"])]))]),_:1})}const Ce=M(A,[["render",we]]);export{Ce as default};
