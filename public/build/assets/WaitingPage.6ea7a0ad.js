import{_ as m,s as x,x as v,c as d,g as u,b as s,d as i,w as h,T as w,F as k,l as y,r,o as a,e as S,t as b,p as U,q as L}from"./app.0b9d15e2.js";const q={created(){},computed:{...x(["User"])},data(){return{isLogout:!1,showLogoutButton:!1,isFetching:!1,isLogout:!1,requestError:null,isScreenLoading:!1}},mounted(){this.getUserDetails()},methods:{async getUserDetails(){this.isScreenLoading=!0,localStorage.getItem("token")!=null&&(this.$store.state.User==null?this.$store.dispatch("getUser").then(t=>{this.$store.commit("setUser",t),console.log("from fetch"),this.checkUserAccount()}).catch(t=>{this.requestError=t,this.$store.dispatch("logoutUser")}).finally(()=>{this.isScreenLoading=!1}):(this.checkUserAccount(),this.isScreenLoading=!1))},checkUserAccount(){this.User.hasRoleOf(["guest"])||(window.location.href="/dashboard")},async logoutUser(){this.isLogout=!0,await v.post("api/logout").then(e=>{localStorage.removeItem("token"),window.location.reload(!0)}).catch(e=>{e.response.status==401&&(localStorage.removeItem("token"),window.location.reload(!0)),this.requestError=e,localStorage.removeItem("token"),window.location.reload(!0)}).finally(()=>{this.isLogout=!1})}}},n=e=>(U("data-v-f395e2cd"),e=e(),L(),e),E={key:1,class:"sksuparent relative min-h-screen max-h-screen bg-gray-900 flex items-center justify-center relative"},B={class:"absolute top-8 right-10"},I=n(()=>s("i",{class:"fa-solid fa-right-from-bracket text-2xl mr-2"},null,-1)),C=n(()=>s("span",{class:"text-2xl font-rubik"}," Logout ",-1)),D=[I,C],T=y('<div class="mx-auto max-w-2xl" data-v-f395e2cd><div class="flex items-center justify-center" data-v-f395e2cd><img src="/assets/undraw_secure_login_pdn4.svg" alt="" class="w-60 h-60" data-v-f395e2cd></div><div class="text-center" data-v-f395e2cd><h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl font-rubik" data-v-f395e2cd> @SKSU PROJECT </h1><p class="text-2xl font-rubik mt-8 uppercase" data-v-f395e2cd> &quot; Your current account type is guest &quot; </p><p class="mt-10 text-lg leading-8 text-white font-rubik" data-v-f395e2cd> To access your preferred position, you will need to be authorized by an administrator. Please reach out to either the developer or the administrator to request authorization. We appreciate your patience while we work to provide you with the best possible experience on our platform. </p></div></div>',1),j={class:"flex justify-center items-center"},A=n(()=>s("p",{class:"text-lg"},"Signing out...",-1));function N(e,t,P,V,o,c){const p=r("LoadingScreen"),g=r("BaseSpinner"),f=r("BaseDialog"),_=r("GlobalErrorCard");return a(),d(k,null,[o.isScreenLoading?(a(),u(p,{key:0})):(a(),d("div",E,[s("div",B,[s("button",{onClick:t[0]||(t[0]=(...l)=>c.logoutUser&&c.logoutUser(...l)),class:"flex items-center jusitfy-center hover:bg-white py-4 px-4 transition rounded ease-in-out hover:text-green-700"},D)]),T])),(a(),u(w,{to:"#app"},[i(f,{show:o.isLogout,width:"200"},{"c-content":h(()=>[s("div",j,[i(g,{class:"mx-2"}),A])]),_:1},8,["show"])])),i(_,{onClose:t[1]||(t[1]=l=>o.requestError=null),show:o.requestError!=null},{default:h(()=>[S(b(o.requestError),1)]),_:1},8,["show"])],64)}const G=m(q,[["render",N],["__scopeId","data-v-f395e2cd"]]);export{G as default};
