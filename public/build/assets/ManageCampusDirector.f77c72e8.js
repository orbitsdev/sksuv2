import{_ as R,x as u,g as h,w as i,r as c,o as a,d as n,c as r,k as V,i as f,b as l,h as y,z as q,t as p,e as d,F as v,T as k,v as S}from"./app.1c991082.js";const N={created(){this.getCampusDirectors(),this.getAllSchoolYears(),this.getUserWhereIsNotCampusAdviser()},data(){return{filterBy:"none",showForm:!1,search:"",sboadvisers:[],selectedSboAdvisers:[],requestError:null,isFetching:!1,isSchooLoading:!1,isSaving:!1,requestError:null,showMainForm:!1,hasRequestError:null,campus_directors:[],users:[],schools:[],school_years:[],selecated_campuse_adviser:null,selecated_school:null,selected_school_year:null,isSchoolYearFetching:!1,isAvailabeUserFetching:!1,isSchoolFetching:!1,selectedDirectors:[],selectedCampusAdviser:null,showDeleteConfirmation:!1,isDeleting:!1,isUpdatingMode:!1,hasWarning:null}},watch:{search(e,t){this.searchCampusAdviser()}},methods:{changeHandler(e){let t=this.school_years.find(g=>g.id==e.target.value);this.schools=t.schools,this.selecated_school=null,this.schools.length>0&&(this.selecated_school=this.schools[0].id)},chnageSchoolData(){},handleCloseForm(){this.selectedCampusAdviser=null,this.isUpdatingMode=!1,this.showMainForm=!1},selectCampusAdviser(e){this.selectedCampusAdviser=e,this.isUpdatingMode=!0,console.log(e),this.selected_school_year=e.school_year.id,e.school!=null&&(this.selecated_school=e.school.id),this.showMainForm=!0},async deleteSelectedCampusAdviser(){this.isDeleting=!0,await u.post("api/manage-campus-director/delete-selected",{campus_directors_id:this.selectedDirectors}).then(e=>{console.log(e),this.showDeleteConfirmation=!1,this.selectedDirectors=[],this.getCampusDirectors(),this.getUserWhereIsNotCampusAdviser()}).catch(e=>{this.hasRequestError="Oops! It seems like there was an error when  when deleting campus advisers. if you think it it was the system please do contact the developer"}).finally(()=>{this.isDeleting=!1})},async getCampusDirectors(){this.isFetching=!0,await u.get("api/manage-campus-director/get-all-campus-director").then(e=>{this.campus_directors=e.data.data}).catch(e=>{this.hasRequestError="Oops! It seems like there was an error when  fetchin  campus advisers, Please check your network connection. o and try again. if you think it it was the system please do contact the developer"}).finally(()=>{this.isFetching=!1})},async getAllSchoolYears(){this.isSchoolYearFetching=!0,await u.get("api/school-year-with-schools").then(e=>{this.school_years=e.data.data,this.school_years.length>0&&(this.selected_school_year=this.school_years[0].id,this.schools=this.school_years[0].schools,this.schools.length>0&&(this.selecated_school=this.schools[0].id))}).catch(e=>{this.hasRequestError='"Oops! It seems like there was an error when  fetchin information school year, Please check your network connection. o and try again. if you think it it was the system please do contact the developer'}).finally(()=>{this.isSchoolYearFetching=!1})},async loadSchool(){this.isSchoolFetching=!0,await u.get("api/schools").then(e=>{this.schools=e.data.data,this.schools.length>0&&(this.selecated_school=this.schools[0].id)}).catch(e=>{this.hasRequestError='"Oops! It seems like there was an error when fetching schools. o and try again. if you think it it was the system please do contact the developer'}).finally(()=>{this.isSchoolFetching=!1})},async getUserWhereIsNotCampusAdviser(){this.isAvailabeUserFetching=!0,await u.get("api/campus-available-users").then(e=>{this.users=e.data.data,this.users.length>0&&(this.selecated_campuse_adviser=this.users[0].id)}).catch(e=>{this.hasRequestError='"Oops! It seems like there was an error when fetching avvalabe users. o and try again. if you think it it was the system please do contact the developer'}).finally(()=>{this.isAvailabeUserFetching=!1})},async addCampusDirector(){this.isSaving=!0;let e={user_id:this.selecated_campuse_adviser,school_id:this.selecated_school,school_year_id:this.selected_school_year};console.log(e),await u.post("api/manage-campus-director/create",e).then(t=>{t.data.data===1?this.hasWarning='" You can only set one user Per School in each school year "':(this.showMainForm=!1,this.getAllSchoolYears(),this.getCampusDirectors(),this.getUserWhereIsNotCampusAdviser()),console.log(t.data.data)}).catch(t=>{this.hasRequestError='"Oops! It seems like there was an error when adding campuse adviser Please check your network connection. o and try again. if you think it it was the system please do contact the developer'}).finally(()=>{this.isSaving=!1})},closeTheForm(){this.showForm=!1},showTheForm(){this.showForm=!0},async makeUsersAsSboAdviser(){const e=[];this.selectedSboAdvisers.forEach(t=>{e.push(t.id)}),this.isSaving=!0,await u.post("api/sbo-advisers/make-user-as-adviser",{usersid:e}).then(t=>{console.log(t.data.data),this.loadSboAdvisers(),this.showForm=!1,this.selectedSboAdvisers=[]}).catch(t=>{console.log(t)}).finally(()=>{this.isSaving=!1})},customConfirmationDialog({title:e="Are you sure?",text:t="You won't be able to revert this!",icon:g="warning",confirmButtonText:x="Yes, delete it!",passFunction:s,passCancelFunction:m}){this.$swal({title:e,text:t,icon:g,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:x}).then(async _=>{_.isConfirmed&&s()})},async searchCampusAdviser(){u.post("api/campus/campus-adviser/search",{search:this.search}).then(e=>{this.campus_directors=e.data.data})},async filterSbo(){await u.post("api/sbo-advisers/filter",{filter:this.filterBy}).then(e=>{this.sboadvisers=e.data.data}).catch(e=>{console.log(e)})},async loadSboAdvisers(){this.isFetching=!0,await u.get("api/sbo-advisers").then(e=>{this.sboadvisers=e.data.data}).catch(e=>{this.requestError=e}).finally(()=>{this.isFetching=!1})}}},W=l("i",{class:"fa-solid fa-plus mr-1"},null,-1),O=d(" ADD CAMPUS DIRECTOR "),P={key:0},G={key:1,class:"flex items-center"},j=l("i",{class:"fa-regular fa-trash-can mr-1"},null,-1),H=l("span",{class:"block"},"Delete Selected ",-1),L={class:"relative w-12 px-6 sm:w-16 sm:px-8"},z=["value"],J={class:"whitespace-nowrap px-3 py-4 text-sm text-green-700"},K={class:"font-semibold font-rubik"},Q={class:"whitespace-nowrap py-4"},X={class:"capitalize"},Z={class:"whitespace-nowrap py-4 text-sm text-gray-900"},$=d(" None "),ee=l("td",{class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},null,-1),se=d(" Yes "),te={class:"mt-2"},oe=l("p",{class:"text-base font-bold"},"Select School Year",-1),ae=d(" Empty "),ie=["value"],le={class:"mt-2"},re=l("p",{class:"text-base font-bold"},"Select University",-1),ne=d("Empty "),ce=["value"],he={class:"mt-2"},de=l("p",{class:"text-base font-bold mt-4"},"Select User",-1),ue=d("Empty "),pe=["value"],me={class:"my-2 flex justify-end"},_e=d(" Close "),ge={key:0,class:"my-1 mx-2"},fe={key:1},ye={key:0},ve={key:1},we=d(" Update "),Ce=d(" Save "),be={key:0,class:"col-span-1 flex justify-center items-center"};function ke(e,t,g,x,s,m){const _=c("TableButton"),A=c("BaseSearchInput"),w=c("BaseSpinner"),F=c("BaseTableSetup"),D=c("StatusCard"),B=c("BaseTable"),U=c("BaseConfirmation"),C=c("BaseDialog"),b=c("NoDataCard"),E=c("ConfirmCard"),T=c("GlobalErrorCard"),I=c("GlobalWarning"),M=c("BaseCard");return a(),h(M,{class:"relative",subtitle:"CAMPUS DIRECTORS"},{header:i(()=>[n(F,null,{"searchs-area":i(()=>[n(_,{class:"mr-2",onClick:t[0]||(t[0]=o=>s.showMainForm=!0)},{default:i(()=>[W,O]),_:1}),n(A,{placeholder:"Search name ..",modelValue:s.search,"onUpdate:modelValue":t[1]||(t[1]=o=>s.search=o)},null,8,["placeholder","modelValue"])]),"filters-area":i(()=>[s.isSchooLoading?(a(),r("div",P,[n(w)])):(a(),r("div",G))]),"actions-area":i(()=>[s.selectedDirectors.length>0?(a(),h(_,{key:0,onClick:t[2]||(t[2]=o=>s.showDeleteConfirmation=!0),mode:""},{default:i(()=>[j,H]),_:1})):V("",!0)]),_:1})]),default:i(()=>[n(B,{thdata:["","Year","Campus Director Name","University",""],isFetching:s.isFetching},{data:i(()=>[(a(!0),r(v,null,f(s.campus_directors,o=>(a(),r("tr",{key:o.id},[l("td",L,[y(l("input",{"onUpdate:modelValue":t[3]||(t[3]=Y=>s.selectedDirectors=Y),value:o.id,type:"checkbox",class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 accent-green-600 text-white rounded border-gray-200 sm:left-6"},null,8,z),[[q,s.selectedDirectors]])]),l("td",J,[l("p",K," SY."+p(o.school_year.from)+" - "+p(o.school_year.to),1)]),l("td",Q,[l("p",X,p(o.user.first_name+" "+o.user.last_name),1)]),l("td",Z,[o.school!=null?(a(),h(D,{key:0,class:"bg-green-700 text-white"},{default:i(()=>[d(p(o.school.name),1)]),_:2},1024)):(a(),h(D,{key:1,class:"bg-gray-700 text-white"},{default:i(()=>[$]),_:1}))]),ee]))),128))]),_:1},8,["isFetching"]),(a(),h(k,{to:"#app"},[n(C,{show:s.showForm,width:"500",preventClose:!0},{"c-content":i(()=>[n(U,{selectedData:s.selectedSboAdvisers,onClose:m.closeTheForm,isSaving:s.isSaving,title:"Are your sure do you want to make this users as",subject:"Sbo-Adviser"},{default:i(()=>[n(_,{class:"mr-2",onClick:m.makeUsersAsSboAdviser},{default:i(()=>[se]),_:1},8,["onClick"])]),_:1},8,["selectedData","onClose","isSaving"])]),_:1},8,["show"])])),(a(),h(k,{to:"#app"},[n(C,{show:s.showMainForm,width:"500",preventClose:!0},{"c-content":i(()=>[l("section",te,[l("div",null,[oe,s.school_years.length<=0?(a(),h(b,{key:0},{default:i(()=>[ae]),_:1})):y((a(),r("select",{key:1,onChange:t[4]||(t[4]=(...o)=>m.changeHandler&&m.changeHandler(...o)),"onUpdate:modelValue":t[5]||(t[5]=o=>s.selected_school_year=o),class:"block w-full py-2 px-3 pr-8 rounded-md bg-white border border-gray-400 focus:outline-none focus:shadow-outline-green focus:border-green-500 sm:text-sm sm:leading-5"},[(a(!0),r(v,null,f(s.school_years,o=>(a(),r("option",{key:o.id,value:o.id}," SY. "+p(o.from)+" - "+p(o.to),9,ie))),128))],544)),[[S,s.selected_school_year]])])]),l("section",le,[l("div",null,[re,s.schools.length<=0?(a(),h(b,{key:0},{default:i(()=>[ne]),_:1})):y((a(),r("select",{key:1,"onUpdate:modelValue":t[6]||(t[6]=o=>s.selecated_school=o),class:"block w-full py-2 px-3 pr-8 rounded-md bg-white border border-gray-400 focus:outline-none focus:shadow-outline-green focus:border-green-500 sm:text-sm sm:leading-5"},[(a(!0),r(v,null,f(s.schools,o=>(a(),r("option",{key:o.id,value:o.id},p(o.name),9,ce))),128))],512)),[[S,s.selecated_school]])])]),l("section",he,[l("div",null,[de,s.users.length<=0?(a(),h(b,{key:0},{default:i(()=>[ue]),_:1})):y((a(),r("select",{key:1,"onUpdate:modelValue":t[7]||(t[7]=o=>s.selecated_campuse_adviser=o),class:"block w-full py-2 px-3 pr-8 rounded-md bg-white border border-gray-400 focus:outline-none focus:shadow-outline-green focus:border-green-500 sm:text-sm sm:leading-5"},[(a(!0),r(v,null,f(s.users,o=>(a(),r("option",{key:o.id,value:o.id},p(o.first_name)+" "+p(o.last_name),9,pe))),128))],512)),[[S,s.selecated_campuse_adviser]])])]),l("div",me,[n(_,{mode:"",class:"mr-2",onClick:m.handleCloseForm},{default:i(()=>[_e]),_:1},8,["onClick"]),s.isSaving?(a(),r("div",ge,[n(w)])):(a(),r("div",fe,[s.selecated_campuse_adviser==null||s.selecated_school==null||s.selected_school_year==null?(a(),r("div",ye)):(a(),r("div",ve,[s.isUpdatingMode?(a(),h(_,{key:0,class:"",onClick:e.updateCampusAdviser},{default:i(()=>[we]),_:1},8,["onClick"])):(a(),h(_,{key:1,class:"",onClick:m.addCampusDirector},{default:i(()=>[Ce]),_:1},8,["onClick"]))]))]))])]),_:1},8,["show"])])),(a(),h(k,{to:"#app"},[n(C,{show:s.showDeleteConfirmation,width:"600",preventClose:!0,class:"h-96"},{"c-content":i(()=>[n(E,{title:"Are you sure? Do you want to delete these Campus Advisers?",message:"Be mindful that deleting this data will also remove all associated informations. This action cannot be undone. Do you still wish to proceed?"},{default:i(()=>[s.isDeleting?(a(),r("div",be,[n(w)])):(a(),r("button",{key:1,onClick:t[8]||(t[8]=(...o)=>m.deleteSelectedCampusAdviser&&m.deleteSelectedCampusAdviser(...o)),class:"col-span-1 transition duration-150 ease-in-out hover:bg-red-600 bg-red-700 rounded text-white px-4 sm:px-8 py-2 text-xs sm:text-sm"}," Yes ")),l("button",{class:"col-span-1 ml-3 bg-gray-100 transition duration-150 text-gray-600 ease-in-out hover:border-gray-400 hover:bg-gray-300 border rounded px-8 py-2 text-sm",onClick:t[9]||(t[9]=o=>s.showDeleteConfirmation=!1)}," Close ")]),_:1},8,["message"])]),_:1},8,["show"])])),n(T,{onClose:t[10]||(t[10]=o=>s.hasRequestError=null),show:s.hasRequestError!=null},null,8,["show"]),n(I,{onClose:t[11]||(t[11]=o=>s.hasWarning=null),show:s.hasWarning!=null},{default:i(()=>[d(p(s.hasWarning),1)]),_:1},8,["show"])]),_:1})}const xe=R(N,[["render",ke]]);export{xe as default};
